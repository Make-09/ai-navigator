{% extends "base.html" %}
{% block title %}Главная — AI Navigator{% endblock %}
{% block content %}
<main class="content-page">
  <h1>AI Life Path Navigator</h1>
  <p>Персональный AI-наставник по образованию и карьере</p>

  <div id="chat-box" class="chat-box"></div>

  <div class="input-area">
    <textarea id="user-input" placeholder="Напишите ваш вопрос..."></textarea>
    <button id="send-btn">➤</button>
    <button id="clear-btn">✖</button>
  </div>

  <script>
    async function sendMessage() {
      const input = document.getElementById("user-input");
      const msg = input.value.trim();
      if (!msg) return;
      input.value = "";

      const userEl = document.createElement("div");
      userEl.className = "message user";
      userEl.textContent = msg;
      document.getElementById("chat-box").appendChild(userEl);

      const res = await fetch("/chat", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ message: msg })
      });
      const data = await res.json();

      const botEl = document.createElement("div");
      botEl.className = "message bot";
      botEl.textContent = data.reply || data.error || "Ошибка AI.";
      document.getElementById("chat-box").appendChild(botEl);
    }

    document.getElementById("send-btn").onclick = sendMessage;
    document.getElementById("clear-btn").onclick = async () => {
      await fetch("/clear", { method: "POST" });
      document.getElementById("chat-box").innerHTML = "";
    };
  </script>
</main>
{% endblock %}
